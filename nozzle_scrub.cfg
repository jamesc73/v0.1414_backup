
[gcode_macro BRUSH_OUT] #Debug Deploy Arm
gcode:
   SET_SERVO SERVO=NozzleBrush ANGLE=100          #normally 90 should be enough but for me it is really rectangular with 100

[gcode_macro BRUSH_IN] #Debug Retract Arm
gcode:
   SET_SERVO SERVO=NozzleBrush ANGLE=10
   SET_SERVO SERVO=NozzleBrush WIDTH=0

[gcode_macro CLEAN_NOZZLE]
gcode:
  SAVE_GCODE_STATE NAME=clean_nozzle
  G90
  G1 X4 Y80 Z25 F5000
  BRUSH_OUT                                       ;set brush servo to up position
  G1 Y90 F3600                                    ;toolhead moves back and fourth across the brush
  G1 Y119 F5000                                   ;speed increase                                  
  G1 Y90 F5000                                    
  G1 Y119 F5000       
  G1 Y90 F5000       
  G1 Y119 F5000
  G1 Y90 F5000                                     ;speed decrease
  G1 Y80 F3600
  BRUSH_IN                                           ;set brush servo to down position
  RESTORE_GCODE_STATE NAME=clean_nozzle      ;return to starting position